<template>
    <svg id="setting" style="cursor: pointer;" width="48"
        height="48" viewBox="0 0 72 72" @click="onSettingClick">
        <g id="color">
            <path fill="#D0CFCE" stroke="none"
                d="M51.2579,29.8111c0,0-1.8149-0.4504-1.0786-2.0742l4.5037-7.4841l-3.6502-3.417l-0.73-0.6833 l-7.1357,4.6903c-0.9431,0.4213-2.037-0.1166-2.2794-1.1205l-1.887-7.8158h-5h-1l-1.8809,7.7858 c-0.2389,0.9894-1.3101,1.5798-2.2425,1.1716c-0.0148-0.0063-0.0296-0.0131-0.0445-0.0198l-7.1357-4.6904l-0.73,0.6833 l-3.6502,3.417l4.5037,7.4841c0.7364,1.6238-1.0785,2.0743-1.0785,2.0743l-8.4766,2.1074l0.1649,4.9972l0.033,0.9995 l8.3622,1.7291c0.952,0.3641,1.3501,1.4954,0.8358,2.3755l-0.0328,0.0562l-4.5037,7.484l3.6502,3.417l0.73,0.6833l7.1357-4.6902 c0.0149-0.0068,0.03-0.0129,0.0445-0.02c0,0,0.0115-0.0042,0.0332-0.0111c1.1606-0.3768,2.393,0.3463,2.6794,1.5325l1.7947,7.4336 h1h5l1.887-7.8158c0.2424-1.0039,1.3364-1.5417,2.2794-1.1205l7.1357,4.6903l0.73-0.6833l3.6502-3.417l-4.5037-7.4841 l-0.0328-0.0562c-0.5143-0.88-0.1162-2.0112,0.8358-2.3755l8.3622-1.729l0.033-0.9995l0.1649-4.9973L51.2579,29.8111z M36,44.9064 c-5.5228,0-10-4.4772-10-10s4.4772-10,10-10s10,4.4772,10,10S41.5228,44.9064,36,44.9064z" />
            <path fill="#9B9B9A" stroke="none"
                d="M36,24.9064c-5.5228,0-10,4.4772-10,10s4.4772,10,10,10s10-4.4772,10-10S41.5228,24.9064,36,24.9064z M36,39.9064c-2.7614,0-5-2.2386-5-5c0-2.7615,2.2386-5,5-5s5,2.2385,5,5C41,37.6678,38.7614,39.9064,36,39.9064z" />
        </g>
        <g id="hair" />
        <g id="skin" />
        <g id="skin-shadow" />
        <g id="line">
            <circle cx="36" cy="34.9064" r="5" fill="none" stroke="#000000" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
            <circle cx="36" cy="34.9064" r="10" fill="none" stroke="#000000" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
            <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2"
                d="M31.1191,19.6921c-0.2389,0.9895-1.31,1.5799-2.2425,1.1717c-0.0147-0.0065-0.0296-0.0131-0.0445-0.0199l-7.1357-4.6903 l-0.73,0.6834l-3.6502,3.417l4.5037,7.484c0.7363,1.6239-1.0785,2.0744-1.0785,2.0744l-8.4766,2.1074l0.1649,4.9973l0.033,0.9995 l8.3622,1.7291h0c0.9521,0.3641,1.3501,1.4954,0.8359,2.3754l-0.0328,0.0562l-4.5037,7.484l3.6502,3.417l0.73,0.6834 l7.1357-4.6903c0.0149-0.0068,0.03-0.0129,0.0445-0.0199c0,0,0.0116-0.0042,0.0332-0.0112 c1.1606-0.3768,2.393,0.3463,2.6794,1.5324l1.7947,7.4336h1h5l1.8869-7.8157c0.2424-1.004,1.3364-1.5418,2.2794-1.1205h0 l7.1357,4.6903l0.73-0.6834l3.6502-3.417l-4.5037-7.484l-0.0328-0.0562c-0.5143-0.8801-0.1162-2.0113,0.8359-2.3755l0,0 l8.3622-1.7291l0.033-0.9995l0.1649-4.9973l-8.4766-2.1074c0,0-1.8149-0.4505-1.0785-2.0744l4.5037-7.484l-3.6502-3.417 l-0.73-0.6834l-7.1357,4.6903v0c-0.943,0.4212-2.037-0.1166-2.2794-1.1206L39,11.9064h-5h-1L31.1191,19.6921" />
        </g>
    </svg>

    <Teleport to="#app">
        <aside
            :class="{ 'tooltip-container': true, 'hidden': !tooltipVisible, 'active': tooltipVisible }">
            <ul>
                <li class="tooltip-item" @click="onThemeBtnClick">
                    <svg class="icon" viewBox="0 0 1024 1024" width="54" height="54">
                        <path
                            d="M747.1616 904.8576l-231.3216-137.5744-238.08 139.1104c-52.3776 30.6176-118.2208-7.168-118.2208-67.84V276.9408c0-86.0672 69.7856-155.8528 155.8528-155.8528h394.5984c86.0672 0 155.8528 69.7856 155.8528 155.8528v560.384c0.0512 60.928-66.304 98.6624-118.6816 67.5328z"
                            fill="#FFAB66"></path>
                        <path
                            d="M659.3536 128.2048s77.0048 39.9872 77.0048 148.0704v353.8944l129.5872-72.3456V285.1328c0-56.2688-33.3824-158.4128-206.592-156.928z"
                            fill="#FF954D"></path>
                        <path
                            d="M258.3552 143.36s-84.3776 31.0784-84.3776 146.5856v577.6384c0 27.2896 26.0096 47.0528 52.2752 39.68l60.9792-17.0496V248.832c0-57.7536 22.4768-88.832 61.0816-104.3968C271.2576 138.9568 258.3552 143.36 258.3552 143.36z"
                            fill="#FFC89F"></path>
                        <path
                            d="M865.8944 837.3248v-279.4496l-350.0544 209.408 231.3216 137.5744c52.3776 31.1296 118.7328-6.6048 118.7328-67.5328z"
                            fill="#FF8A33"></path>
                        <path
                            d="M891.4944 557.8752c0-0.0512 0-0.0512 0 0V276.992c0-100.0448-81.408-181.4528-181.4528-181.4528H315.4432c-100.0448 0-181.4528 81.408-181.4528 181.4528v561.6128c0 37.7856 19.5584 71.5264 52.3264 90.368 16.2816 9.3184 34.048 13.9776 51.8656 13.9776 18.0736 0 36.096-4.8128 52.5312-14.3872l225.024-131.4816 218.368 129.8432c2.048 1.2288 4.1472 2.3552 6.2464 3.4304 0.6144 0.3072 1.2288 0.5632 1.792 0.8704 1.536 0.7168 3.0208 1.4848 4.5568 2.1504 0.8192 0.3584 1.6384 0.6144 2.4576 0.9728 1.3312 0.512 2.6624 1.0752 4.0448 1.5872 0.9216 0.3072 1.8432 0.5632 2.7648 0.8704 1.28 0.4096 2.56 0.8192 3.84 1.1776 0.9728 0.256 1.9456 0.4608 2.9184 0.7168 1.28 0.3072 2.5088 0.6656 3.7888 0.9216 0.9728 0.2048 1.9968 0.3584 2.9696 0.512 1.2288 0.2048 2.5088 0.4608 3.7376 0.6656 1.024 0.1536 2.048 0.2048 3.072 0.3584 1.2288 0.1536 2.4576 0.3072 3.7376 0.3584l3.1232 0.1536c1.2288 0.0512 2.4576 0.1024 3.6864 0.1024h0.4608c1.024 0 1.9968-0.0512 3.0208-0.1024 1.0752-0.0512 2.0992-0.0512 3.1744-0.1024 1.1776-0.0512 2.3552-0.2048 3.5328-0.3072 1.024-0.1024 2.0992-0.1536 3.1232-0.3072 1.1776-0.1536 2.3552-0.3584 3.5328-0.5632 1.024-0.1536 2.048-0.3072 3.1232-0.512 1.1776-0.2048 2.3552-0.512 3.5328-0.8192 1.024-0.256 2.048-0.4608 3.072-0.7168 1.1776-0.3072 2.3552-0.7168 3.5328-1.0752 0.9728-0.3072 1.9968-0.5632 2.9696-0.8704 1.2288-0.4096 2.4064-0.8704 3.6352-1.3312 0.9216-0.3584 1.8944-0.6656 2.816-1.024 1.28-0.512 2.56-1.1264 3.84-1.6896 0.8192-0.3584 1.6896-0.7168 2.5088-1.1264 1.5872-0.768 3.1232-1.6384 4.6592-2.4576 0.512-0.256 1.024-0.512 1.4848-0.768 14.2336-8.0896 25.9072-18.9952 34.7136-31.7952 11.5712-16.896 17.9712-37.1712 17.9712-58.7776v-279.552z m-131.2256 324.9664l-194.4576-115.6096 274.4832-164.1984v234.3424c0 19.3024-10.0352 36.5056-26.7776 46.0288-5.6832 3.2256-11.776 5.2736-17.92 6.2464-11.9808 1.8944-24.3712-0.3072-35.328-6.8096z m-495.4112 1.4336c-16.5888 9.6768-36.4544 9.7792-53.0944 0.2048s-26.624-26.7264-26.624-45.9264V276.9408c0-71.8336 58.4192-130.2528 130.2528-130.2528h394.5984c71.8336 0 130.2528 58.4192 130.2528 130.2528v266.3936l-337.5616 201.9328-237.824 139.008z"
                            fill="#434A54"></path>
                        <path
                            d="M532.992 283.136l28.7744 58.3168a23.7824 23.7824 0 0 0 17.8688 13.0048l64.3072 9.3696c19.5072 2.816 27.2896 26.7776 13.1584 40.5504l-46.5408 45.3632a23.79264 23.79264 0 0 0-6.8096 21.0432l11.008 64.0512c3.328 19.4048-17.0496 34.2016-34.4576 25.0368l-57.5488-30.2592a23.79264 23.79264 0 0 0-22.1184 0l-57.5488 30.2592c-17.408 9.1648-37.7856-5.632-34.4576-25.0368l11.008-64.0512c1.3312-7.7312-1.2288-15.5648-6.8096-21.0432l-46.5408-45.3632c-14.08-13.7728-6.2976-37.6832 13.1584-40.5504l64.3072-9.3696a23.69536 23.69536 0 0 0 17.8688-13.0048l28.7744-58.3168c8.704-17.664 33.8944-17.664 42.5984 0z"
                            fill="#C0DAF9"></path>
                        <path
                            d="M568.2688 353.28s-105.1136 47.36-85.1456 179.9168c-48.8448 31.8464-71.0656 22.9376-71.0656 22.9376l14.08-96.9728-65.8944-68.096 19.968-22.9376 76.2368-17.0496 52.5824-90.3168L568.2688 353.28z"
                            fill="#E9F5FF"></path>
                        <path
                            d="M431.9744 588.2368c-10.1888 0-20.3264-3.1744-28.9792-9.472a49.13664 49.13664 0 0 1-19.6608-48.2816L394.24 467.3536l-45.8752-44.6976a49.03936 49.03936 0 0 1-12.4928-50.5856 48.95232 48.95232 0 0 1 39.8336-33.5872l63.3856-9.216 28.3648-57.4464a49.12128 49.12128 0 0 1 44.288-27.4944c18.944 0 35.8912 10.5472 44.288 27.4944l28.3648 57.4464 63.3856 9.216c18.7392 2.7136 33.9968 15.616 39.8336 33.5872 5.8368 18.0224 1.0752 37.376-12.4928 50.5856l-45.8752 44.6976 10.752 63.0784c3.2256 18.6368-4.3008 37.1712-19.6608 48.2816a49.05984 49.05984 0 0 1-51.968 3.7376l-56.6784-29.7984-56.6784 29.7984a48.67072 48.67072 0 0 1-23.04 5.7856z m-45.2096-199.68l43.8784 42.8032a49.31072 49.31072 0 0 1 14.1824 43.6736l-10.3424 60.416 54.272-28.5184a49.23392 49.23392 0 0 1 45.9264 0l54.272 28.5184-10.3936-60.416c-2.7648-16.0256 2.56-32.3584 14.1824-43.6736l43.8784-42.8032-60.672-8.8064a49.5104 49.5104 0 0 1-37.1712-26.9824l-27.136-54.9376-27.136 54.9376a49.26464 49.26464 0 0 1-37.1712 26.9824l-60.5696 8.8064z m197.9904-58.4704zM532.992 283.136l-22.9376 11.3152 22.9376-11.3152z"
                            fill="#434A54"></path>
                    </svg>
                    <span>主题</span>
                </li>
                <li class="tooltip-item">
                    <svg class="icon" viewBox="0 0 1024 1024" width="54" height="54">
                        <path
                            d="M824.9344 150.016H174.336c-37.4272 0-56.8832 44.5952-31.4368 71.9872l234.5984 252.8256c9.4208 10.1376 14.6432 23.5008 14.6432 37.376v289.8432c0 13.4656 8.3456 25.5488 20.992 30.2592l165.2224 61.7472c11.4688 4.3008 23.7568-4.1984 23.7568-16.4864V505.9072c0-14.2848 5.5808-28.0064 15.5136-38.2976l237.9776-244.8896c26.4704-27.136 7.2192-72.704-30.6688-72.704z"
                            fill="#C9C9F4"></path>
                        <path
                            d="M282.4192 213.8112s149.5552 152.0128 165.9392 168.3968c32.768 32.768 25.1392 115.6096 25.1392 115.6096L225.28 210.5856l57.1392 3.2256z"
                            fill="#F8F8FF"></path>
                        <path
                            d="M181.9648 153.088l272.2816 276.5824c12.8 13.0048 19.968 30.464 19.968 48.6912v382.208l-84.5824-38.656V474.5728L112.7424 210.0224s-15.36-50.7904 69.2224-56.9344z"
                            fill="#DEDEFF"></path>
                        <path
                            d="M855.1936 223.8464H151.5008S129.1776 153.088 174.592 153.088h633.7024c44.544 0 59.1872 42.6496 46.8992 70.7584z"
                            fill="#E6E6FF"></path>
                        <path
                            d="M809.0112 153.088l-272.2816 276.5824a69.376 69.376 0 0 0-19.968 48.6912v382.208l84.5824 33.8432v-419.84l276.8384-264.5504c0.0512 0 15.4624-50.7904-69.1712-56.9344z"
                            fill="#B2B2EA"></path>
                        <path
                            d="M584.5504 920.7296c-5.0688 0-10.1888-0.9216-15.104-2.7136l-165.2224-61.7472c-22.528-8.3968-37.632-30.208-37.632-54.2208v-289.8432c0-7.424-2.7648-14.4896-7.8336-19.968L124.16 239.4112c-18.7904-20.2752-23.6032-48.5888-12.544-73.9328s35.072-41.0624 62.72-41.0624h650.5472c28.0064 0 52.1728 16.0256 63.0784 41.8304 10.9056 25.8048 5.5296 54.272-13.9776 74.3424l-237.9776 244.8896a29.29664 29.29664 0 0 0-8.2944 20.4288v371.6608c0 14.1312-6.9632 27.392-18.5856 35.4816a42.9568 42.9568 0 0 1-24.576 7.68zM174.336 175.616c-10.1888 0-14.4384 7.2192-15.8208 10.3424s-3.7888 11.1616 3.1744 18.6368L396.288 457.472c13.8752 14.9504 21.504 34.4064 21.504 54.784v289.8432c0 2.7648 1.7408 5.2736 4.352 6.2464l154.4192 57.7024V505.9072c0-21.0944 8.0896-41.0112 22.784-56.1152l237.9776-244.8896c7.2192-7.424 4.864-15.5648 3.5328-18.7392-1.3312-3.1744-5.5808-10.5472-15.872-10.5472H174.336z"
                            fill="#434A54"></path>
                        <path
                            d="M878.2336 592.4352h-150.7328c-14.1312 0-25.6-11.4688-25.6-25.6s11.4688-25.6 25.6-25.6h150.7328c14.1312 0 25.6 11.4688 25.6 25.6s-11.4688 25.6-25.6 25.6zM878.2336 720.8448h-150.7328c-14.1312 0-25.6-11.4688-25.6-25.6s11.4688-25.6 25.6-25.6h150.7328c14.1312 0 25.6 11.4688 25.6 25.6s-11.4688 25.6-25.6 25.6zM878.2336 846.2336h-150.7328c-14.1312 0-25.6-11.4688-25.6-25.6s11.4688-25.6 25.6-25.6h150.7328c14.1312 0 25.6 11.4688 25.6 25.6s-11.4688 25.6-25.6 25.6z"
                            fill="#434A54"></path>
                    </svg>
                    <span>筛选</span>
                </li>
                <li class="tooltip-item">
                    <svg class="icon" viewBox="0 0 1024 1024" width="54" height="54">
                        <path
                            d="M115.4048 821.4016V236.2368c0-9.5744 4.7616-18.432 12.7488-23.7056C174.08 182.3744 337.408 95.0272 508.672 241.9712c126.6688-155.9552 327.7312-65.1776 383.1296-34.2016a28.3648 28.3648 0 0 1 14.592 24.7808v589.3632c0 11.776-12.9024 18.8928-22.9888 12.6976-54.528-33.5872-200.3456-97.4848-373.0432 37.0688-111.1552-130.6624-296.8576-88.32-371.5584-37.8368-9.9328 6.7584-23.3984-0.4096-23.3984-12.4416z"
                            fill="#C0DAF9"></path>
                        <path
                            d="M219.5456 170.9568c-42.4448 12.0832-74.7008 30.5664-91.392 41.5232a28.25728 28.25728 0 0 0-12.7488 23.7056v585.1648c0 12.0832 13.4656 19.2 23.4496 12.4416 20.0704-13.568 48.1792-26.5216 80.6912-35.6864V170.9568zM593.4592 174.7968c-30.1056 13.8752-58.9824 35.3792-84.736 67.1744-28.8768-24.7808-57.5488-42.8544-85.4528-55.7056v620.4416c31.488 13.7728 61.3376 34.6624 87.0912 64.9728 28.5184-22.2208 56.32-39.0144 83.0464-51.4048V174.7968zM892.928 207.7696c-16.1792-9.728-45.7216-25.3952-82.3296-37.4272v629.7088a277.23776 277.23776 0 0 1 74.496 34.56c9.3184 6.1952 21.3504-0.9216 21.3504-12.6976V232.5504c0-10.2912-5.1712-19.7632-13.5168-24.7808z"
                            fill="#9EBFEF"></path>
                        <path
                            d="M198.0928 191.0784v607.5904l64.8192-12.8V158.6688zM584.0384 191.0784v607.5904l64.8704-12.8V158.6688z"
                            fill="#E9F5FF"></path>
                        <path
                            d="M904.3456 185.3952c-42.2912-23.6032-253.5424-129.4336-398.5408 21.1968-177.408-135.8848-343.6544-47.0016-391.68-15.5136a53.7856 53.7856 0 0 0-24.32 45.1072v585.1648a40.5504 40.5504 0 0 0 21.5552 35.8912 40.56576 40.56576 0 0 0 41.8304-2.2528c68.5056-46.2848 237.8752-84.1216 337.7152 33.2288a25.5488 25.5488 0 0 0 35.2256 3.584c159.9488-124.5696 293.7856-66.304 343.9104-35.4304a40.66304 40.66304 0 1 0 62.0032-34.56V232.5504c0-19.5584-10.5984-37.5808-27.6992-47.1552zM313.5488 759.1936h-2.7648c-69.4272 0.5632-130.304 21.248-169.728 43.3152V236.2368c0-0.9728 0.4608-1.792 1.1776-2.304 41.472-27.2384 187.0336-104.8576 341.4528 20.48l1.536 558.6944c-58.0608-43.264-122.624-53.9136-171.6736-53.9136z m567.296 44.3904c-62.8736-33.8432-191.9488-76.9024-344.3712 18.6368l-1.536-571.5968c119.5008-135.7824 307.456-41.216 344.4736-20.5312 0.9216 0.512 1.4336 1.4336 1.4336 2.4576v571.0336z"
                            fill="#434A54"></path>
                    </svg>
                    <span>模式</span>
                </li>
            </ul>
        </aside>
    </Teleport>

    <theme-setting ref="ThemeSettingRef"></theme-setting>
</template>

<script setup lang='ts'>
import { useThemeStore } from '@/stores/theme';
import { ref, unref } from 'vue';
import ThemeSetting from '@/components/set/ThemeSetting.vue';

const ThemeSettingRef = ref();

// 主题控制
const themeStore = useThemeStore();

// 工具栏可视化
const tooltipVisible = ref(false);
const onSettingClick = function () {
    tooltipVisible.value = !tooltipVisible.value;
}

// 打开主题弹框
const onThemeBtnClick = function() {
    unref(ThemeSettingRef).open();
}
</script>

<style scoped lang="scss">
@keyframes rotate {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

#setting {
    position: fixed;
    right: 30px;
    top: 40px;
    animation: rotate 3s infinite linear paused;
    z-index: 9;

    &:hover {
        animation-play-state: running;
    }
}

@keyframes shake {
    0% {
        transform: rotate(12deg);
    }

    20% {
        transform: rotate(-12deg);
    }

    40% {
        transform: rotate(8deg);
    }

    60% {
        transform: rotate(-6deg);
    }

    80% {
        transform: rotate(4deg);
    }

    100% {
        transform: rotate(0);
    }
}

@keyframes pop {
    0% {
        right: -105px;
    }

    40% {
        right: -5px;
    }

    100% {
        right: -20px;
    }
}

@keyframes hidden {
    0% {
        right: -20px;
    }

    40% {
        right: -5px;
    }

    100% {
        right: -105px;
    }
}

.tooltip-container {
    position: fixed;
    top: 50%;
    transform: translateY(-50%);
    width: 80px;
    border-radius: 15px 0 0 15px;
    box-shadow: 0 0 4px 0 var(--settingPopShadow);
    backdrop-filter: blur(5px);
    transition: right .4s ease-in-out;
    background-color: rgba($color: #93eee9, $alpha: var(--settingPopOpacity));
    padding-right: 20px;
    z-index: 9;

    ul {
        padding: 20px 10px 20px 20px;
        margin: 0;

        .tooltip-item {
            list-style: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-bottom: 1px solid var(--borderColor);
            padding: 10px 0;
            cursor: pointer;
            transform-origin: 50% 100%;
            font-size: 20px;
            color: #333;
            font-family: var(--fontFamily);

            &:hover {
                animation: shake 1 .6s;
            }
        }
    }

    &.hidden {
        animation: hidden .5s 1 forwards ease-in-out;
    }

    &.active {
        animation: pop .8s 1 forwards ease-in-out;
    }
}
</style>